### Project Overview

This project is a "Toys for Tots Box Locator" application. It's designed to help Marine Corps Reserve detachments manage and track their Toys for Tots donation boxes. The system uses QR codes to link physical boxes to a digital record, allowing for on-site registration, public reporting of box status (e.g., full, needs pickup), and a centralized dashboard for volunteers.

The architecture consists of a frontend built with vanilla HTML, CSS, and JavaScript, and a backend powered by Firebase (Firestore, Authentication, and Cloud Functions). The public-facing part of the application displays a map of donation boxes, while a secure dashboard provides a real-time logistics view for authorized volunteers.

### Building and Running

The project uses Firebase for its backend and hosting. To run the project locally, you'll need to use the Firebase emulators.

**Running the application:**

1.  **Install dependencies:**
    ```bash
    npm install
    ```
2.  **Start the Firebase emulators:**
    ```bash
    npx firebase emulators:start --only hosting,auth,firestore,functions
    ```
3.  **Access the application:**
    *   **Public map:** [http://localhost:5000](http://localhost:5000)
    *   **Volunteer dashboard:** [http://localhost:5000/dashboard](http://localhost:5000/dashboard)
    *   **Firebase Emulator UI:** [http://localhost:4000](http://localhost:4000)

**Running tests:**

The project uses Playwright for end-to-end testing. The tests are located in the `tests/e2e` directory.

*   **Run all tests:**
    ```bash
    npm test
    ```
*   **Run tests in headed mode:**
    ```bash
    npm run test:headed
    ```
*   **Run tests with UI:**
    ```bash
    npm run test:ui
    ```
*   **View test report:**
    ```bash
    npm run test:report
    ```

### Development Conventions

*   **Authentication:** User authentication is handled by Firebase Authentication. Volunteers are authorized based on a shared passcode when they first provision a box.
*   **Database:** Firestore is used as the database. The schema is implicitly defined by the data structures used in the application.
*   **Backend Logic:** Firebase Cloud Functions (`functions/index.js`) handle backend logic, such as sending email notifications when a report is created and authorizing volunteers.
*   **Frontend Logic:** The frontend logic is written in vanilla JavaScript and is embedded in the HTML files (`public/dashboard/index.html`, `public/js/main.js`).
*   **Testing:** End-to-end tests are written with Playwright and cover user authentication, dashboard functionality, and box management. The tests use a set of helper functions (`tests/fixtures/firebase-helpers.js`) to seed and clear test data in the Firestore emulator.